{{>layouts/header}}

<div class="container-fluid schedule-hub-container">
    <!-- íƒ­ í—¤ë” -->
    <ul class="nav nav-tabs schedule-hub-tabs" id="workTimeHubTabs" role="tablist">
        <!-- 1) ì£¼ê°„ ê·¼ë¬´ì‹œê°„ ëŒ€ì‹œë³´ë“œ (ê°œë³„) -->
        <li class="nav-item" role="presentation">
            <a
                    class="nav-link active"
                    id="worktime-tab-btn"
                    data-bs-toggle="tab"
                    data-toggle="tab"
                    href="#worktime-tab"
                    role="tab"
                    aria-controls="worktime-tab"
                    aria-selected="true">
                ì£¼ê°„(ê°œë³„)
            </a>
        </li>

        <!-- 3) ì›”ê°„ ê·¼ë¬´ì‹œê°„ ëŒ€ì‹œë³´ë“œ (ê°œë³„) -->
        <li class="nav-item" role="presentation">
            <a
                    class="nav-link"
                    id="workmonth-tab-btn"
                    data-bs-toggle="tab"
                    data-toggle="tab"
                    href="#workmonth-tab"
                    role="tab"
                    aria-controls="workmonth-tab"
                    aria-selected="false">
                ì›”ê°„(ê°œë³„)
            </a>
        </li>

        <!-- 2) ì£¼ê°„ ê·¼ë¬´ì‹œê°„ ëŒ€ì‹œë³´ë“œ (ì „ì²´) -->
        <li class="nav-item" role="presentation">
            <a
                    class="nav-link"
                    id="worktime-all-tab-btn"
                    data-bs-toggle="tab"
                    data-toggle="tab"
                    href="#worktime-all-tab"
                    role="tab"
                    aria-controls="worktime-all-tab"
                    aria-selected="false">
                ì£¼ê°„(í†µí•©)
            </a>
        </li>

        <!-- ğŸ”¹ 4) ì›”ê°„ ê·¼ë¬´ì‹œê°„ ëŒ€ì‹œë³´ë“œ (ì „ì²´) - ìƒˆë¡œ ì¶”ê°€ -->
        <li class="nav-item" role="presentation">
            <a
                    class="nav-link"
                    id="workmonth-all-tab-btn"
                    data-bs-toggle="tab"
                    data-toggle="tab"
                    href="#workmonth-all-tab"
                    role="tab"
                    aria-controls="workmonth-all-tab"
                    aria-selected="false">
                ì›”ê°„(í†µí•©)
            </a>
        </li>
    </ul>

    <!-- íƒ­ ì½˜í…ì¸  -->
    <div class="tab-content schedule-hub-content" id="workTimeHubTabContent">

        <!-- 1) ì£¼ê°„ ê·¼ë¬´ì‹œê°„: /members/showworktimedashboard -->
        <div
                class="tab-pane fade show active schedule-hub-pane"
                id="worktime-tab"
                role="tabpanel"
                aria-labelledby="worktime-tab-btn">
            <iframe
                    id="worktime-frame"
                    class="schedule-hub-iframe"
                    src="/members/showworktimedashboard"
                    title="ì£¼ê°„ ê·¼ë¬´ì‹œê°„"
                    style="width:100%; border:none; min-height:calc(100vh - 180px);">
            </iframe>
        </div>

        <!-- 3) ì›”ê°„ ê·¼ë¬´ì‹œê°„(ê°œë³„): /members/showworkmonthdashboard -->
        <div
                class="tab-pane fade schedule-hub-pane"
                id="workmonth-tab"
                role="tabpanel"
                aria-labelledby="workmonth-tab-btn">
            <!-- lazy-load: ì²˜ìŒì—” data-src ë§Œ ì„¤ì • -->
            <iframe
                    id="workmonth-frame"
                    class="schedule-hub-iframe"
                    data-src="/members/showworkmonthdashboard"
                    title="ì›”ê°„ ê·¼ë¬´ì‹œê°„"
                    style="width:100%; border:none; min-height:calc(100vh - 180px);">
            </iframe>
        </div>

        <!-- 2) ì£¼ê°„ ê·¼ë¬´ì‹œê°„(ì „ì²´): /members/showworktimedashboardall -->
        <div
                class="tab-pane fade schedule-hub-pane"
                id="worktime-all-tab"
                role="tabpanel"
                aria-labelledby="worktime-all-tab-btn">
            <!-- lazy-load: ì²˜ìŒì—” data-src ë§Œ ì„¤ì • -->
            <iframe
                    id="worktime-all-frame"
                    class="schedule-hub-iframe"
                    data-src="/members/showworktimedashboardall"
                    title="ì£¼ê°„ ê·¼ë¬´ì‹œê°„(ì „ì²´)"
                    style="width:100%; border:none; min-height:calc(100vh - 180px);">
            </iframe>
        </div>

        <!-- ğŸ”¹ 4) ì›”ê°„ ê·¼ë¬´ì‹œê°„(ì „ì²´): /members/showworkMonthdashboardall -->
        <div
                class="tab-pane fade schedule-hub-pane"
                id="workmonth-all-tab"
                role="tabpanel"
                aria-labelledby="workmonth-all-tab-btn">
            <!-- lazy-load: ì²˜ìŒì—” data-src ë§Œ ì„¤ì • -->
            <iframe
                    id="workmonth-all-frame"
                    class="schedule-hub-iframe"
                    data-src="/members/showworkMonthdashboardall"
                    title="ì›”ê°„ ê·¼ë¬´ì‹œê°„(ì „ì²´)"
                    style="width:100%; border:none; min-height:calc(100vh - 180px);">
            </iframe>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const tabLinks = document.querySelectorAll('#workTimeHubTabs .nav-link');
        const tabPanes = document.querySelectorAll('#workTimeHubTabContent .tab-pane');

        tabLinks.forEach(function (link) {
            link.addEventListener('click', function (e) {
                e.preventDefault();

                const targetSelector = link.getAttribute('href');
                const targetPane = document.querySelector(targetSelector);

                // 1) Bootstrap 5 (JS) ê°€ ìˆìœ¼ë©´ ê·¸ê±¸ ì‚¬ìš©
                if (window.bootstrap && bootstrap.Tab) {
                    const tab = new bootstrap.Tab(link);
                    tab.show();
                }
                // 2) Bootstrap 4 (jQuery) ê°€ ìˆìœ¼ë©´ ê·¸ê±¸ ì‚¬ìš©
                else if (window.$ && typeof $(link).tab === 'function') {
                    $(link).tab('show');
                }
                // 3) ë‘˜ ë‹¤ ì—†ìœ¼ë©´ ìˆœìˆ˜ JSë¡œ ê°•ì œ í† ê¸€
                else {
                    tabLinks.forEach(function (l) {
                        l.classList.remove('active');
                    });
                    tabPanes.forEach(function (p) {
                        p.classList.remove('show', 'active');
                    });
                    link.classList.add('active');
                    if (targetPane) {
                        targetPane.classList.add('show', 'active');
                    }
                }

                // âœ… ê³µí†µ lazy-load ì²˜ë¦¬:
                //   í™œì„±í™”ëœ íƒ­ pane ì•ˆì— data-src ê°€ ìˆëŠ” iframe ì´ë©´
                //   ìµœì´ˆ í´ë¦­ ì‹œì—ë§Œ src ì„¸íŒ…
                if (targetPane) {
                    const iframe = targetPane.querySelector('iframe[data-src]');
                    if (iframe && !iframe.src) {
                        const dataSrc = iframe.getAttribute('data-src');
                        if (dataSrc) {
                            iframe.src = dataSrc;
                        }
                    }
                }
            });
        });
    });
</script>

{{>layouts/footer}}
